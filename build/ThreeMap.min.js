/*!
 * Three-Map v0.0.1 Alpha
 * (c) 2018-present Areknawo
 * Released under the Mit License.
 */
!function(t,e){"object"===typeof exports&&"undefined"!==typeof module?e(exports,require("three")):"function"===typeof define&&define.amd?define(["exports","three"],e):e(t.ThreeMap={},t.THREE)}(this,function(t,e){"use strict";const r={camera:void 0,controls:void 0,events:void 0,frustum:void 0,grid:void 0,material:void 0,scene:void 0,style:void 0,three_map:void 0};var n=Math.PI/180;Math.PI;function i(t,e,r){var n=s(t,e,r);return n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n}function o(t){return[[2*t[0],2*t[1],t[2]+1],[2*t[0]+1,2*t[1],t[2]+1],[2*t[0]+1,2*t[1]+1,t[2]+1],[2*t[0],2*t[1]+1,t[2]+1]]}function s(t,e,r){var i=Math.sin(e*n),o=Math.pow(2,r);return[o*(t/360+.5),o*(.5-.25*Math.log((1+i)/(1-i))/Math.PI),r]}var a=o,u=function(t){for(var e="",r=t[2];r>0;r--){var n=0,i=1<<r-1;0!==(t[0]&i)&&n++,0!==(t[1]&i)&&(n+=2),e+=n.toString()}return e},h=function(t){for(var e=0,r=0,n=t.length,i=n;i>0;i--){var o=1<<i-1,s=+t[n-i];1===s&&(e|=o),2===s&&(r|=o),3===s&&(e|=o,r|=o)}return[e,r,n]},l=i;var c=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t,e){var r=function(){var t={},e=Math.PI/180,r=180/Math.PI,n=6378137,i=20037508.342789244;function o(e){if(e=e||{},this.size=e.size||256,!t[this.size]){var r=this.size,n=t[this.size]={};n.Bc=[],n.Cc=[],n.zc=[],n.Ac=[];for(var i=0;i<30;i++)n.Bc.push(r/360),n.Cc.push(r/(2*Math.PI)),n.zc.push(r/2),n.Ac.push(r),r*=2}this.Bc=t[this.size].Bc,this.Cc=t[this.size].Cc,this.zc=t[this.size].zc,this.Ac=t[this.size].Ac}return o.prototype.px=function(t,r){var n=this.zc[r],i=Math.min(Math.max(Math.sin(e*t[1]),-.9999),.9999),o=Math.round(n+t[0]*this.Bc[r]),s=Math.round(n+.5*Math.log((1+i)/(1-i))*-this.Cc[r]);return o>this.Ac[r]&&(o=this.Ac[r]),s>this.Ac[r]&&(s=this.Ac[r]),[o,s]},o.prototype.ll=function(t,e){var n=(t[1]-this.zc[e])/-this.Cc[e];return[(t[0]-this.zc[e])/this.Bc[e],r*(2*Math.atan(Math.exp(n))-.5*Math.PI)]},o.prototype.bbox=function(t,e,r,n,i){n&&(e=Math.pow(2,r)-1-e);var o=[t*this.size,(+e+1)*this.size],s=[(+t+1)*this.size,e*this.size],a=this.ll(o,r).concat(this.ll(s,r));return"900913"===i?this.convert(a,"900913"):a},o.prototype.xyz=function(t,e,r,n){"900913"===n&&(t=this.convert(t,"WGS84"));var i=[t[0],t[1]],o=[t[2],t[3]],s=this.px(i,e),a=this.px(o,e),u=[Math.floor(s[0]/this.size),Math.floor((a[0]-1)/this.size)],h=[Math.floor(a[1]/this.size),Math.floor((s[1]-1)/this.size)],l={minX:Math.min.apply(Math,u)<0?0:Math.min.apply(Math,u),minY:Math.min.apply(Math,h)<0?0:Math.min.apply(Math,h),maxX:Math.max.apply(Math,u),maxY:Math.max.apply(Math,h)};if(r){var c={minY:Math.pow(2,e)-1-l.maxY,maxY:Math.pow(2,e)-1-l.minY};l.minY=c.minY,l.maxY=c.maxY}return l},o.prototype.convert=function(t,e){return"900913"===e?this.forward(t.slice(0,2)).concat(this.forward(t.slice(2,4))):this.inverse(t.slice(0,2)).concat(this.inverse(t.slice(2,4)))},o.prototype.forward=function(t){var r=[n*t[0]*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>i&&(r[0]=i),r[0]<-i&&(r[0]=-i),r[1]>i&&(r[1]=i),r[1]<-i&&(r[1]=-i),r},o.prototype.inverse=function(t){return[t[0]*r/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*r]},o}();t.exports=r});const f=2048,p=20037510/f,d=new c({size:2048}),y=/{([zxy])}/g;function v(t){throw new Error(t)}function g(t){const e=Math.pow(2,t[2])-1;return t[0]>=0&&t[1]>=0&&t[0]<=e&&t[1]<=e}function m(t){let e=h(t);e=a(e)[2];const r=Math.PI-2*Math.PI*e[1]/Math.pow(2,e[2]);return d.forward([e[0]/Math.pow(2,e[2])*360-180,180/Math.PI*Math.atan(.5*(Math.exp(r)-Math.exp(-r)))])}function x(t){const e=h(t);return p/Math.pow(2,e[2])}var w="undefined"===typeof Symbol?"__target":Symbol(),b="application/javascript",M=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,_=window.URL||window.webkitURL,k=window.Worker;if(k){var F,V=T("self.onmessage = function () {}"),S=new Uint8Array(1);try{if(/(?:Trident|Edge)\/(?:[567]|12)/i.test(navigator.userAgent))throw new Error("Not available");(F=new k(V)).postMessage(S,[S.buffer])}catch(t){k=null}finally{_.revokeObjectURL(V),F&&F.terminate()}}function T(t){try{return _.createObjectURL(new Blob([t],{type:b}))}catch(r){var e=new M;return e.append(t),_.createObjectURL(e.getBlob(type))}}var D=new function(t,e){return function(r){var n=this;if(!e)return new k(t);if(k&&!r){var i=T(`${e}`.replace(/^function.+?{/,"").slice(0,-1));return this[w]=new k(i),_.revokeObjectURL(i),this[w]}var o={postMessage:t=>{n.onmessage&&setTimeout(()=>n.onmessage({data:t,target:o}))}};e.call(o),this.postMessage=(t=>{setTimeout(()=>o.onmessage({data:t,target:n}))}),this.isThisThread=!0}}("./worker.tmp.min.js",function(e,r){var n,i=this;n=function(){Math.PI,Math.PI;var t=r;function r(t,e){this.x=t,this.y=e}r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t};var n=o;function o(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(s,this,e)}function s(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function a(t){for(var e,r,n=0,i=0,o=t.length,s=o-1;i<o;s=i++)e=t[i],n+=((r=t[s]).x-e.x)*(e.y+r.y);return n}o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var r,n=e.readVarint()+e.pos,i=1,o=0,s=0,a=0,u=[];e.pos<n;){if(o<=0){var h=e.readVarint();i=7&h,o=h>>3}if(o--,1===i||2===i)s+=e.readSVarint(),a+=e.readSVarint(),1===i&&(r&&u.push(r),r=[]),r.push(new t(s,a));else{if(7!==i)throw new Error("unknown command "+i);r&&r.push(r[0].clone())}}return r&&u.push(r),u},o.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,s=1/0,a=-1/0,u=1/0,h=-1/0;t.pos<e;){if(n<=0){var l=t.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)i+=t.readSVarint(),o+=t.readSVarint(),i<s&&(s=i),i>a&&(a=i),o<u&&(u=o),o>h&&(h=o);else if(7!==r)throw new Error("unknown command "+r)}return[s,u,a,h]},o.prototype.toGeoJSON=function(t,e,r){var n,i,s=this.extent*Math.pow(2,r),u=this.extent*t,h=this.extent*e,l=this.loadGeometry(),c=o.types[this.type];function f(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+h)/s;t[e]=[360*(r.x+u)/s-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<l.length;n++)p[n]=l[n][0];f(l=p);break;case 2:for(n=0;n<l.length;n++)f(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var s=a(t[o]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)f(l[n][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var u=h;function h(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(l,this,e),this.length=this._features.length}function l(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}function c(t,e,r){if(3===t){var n=new u(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}h.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new n(this._pbf,e,this.extent,this._keys,this._values)};var f=function(t,e){this.layers=t.readFields(c,{},e)},p="undefined"!=typeof e?e:"undefined"!=typeof global?global:"undefined"!=typeof i?i:{},d={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},y=Object.prototype.toString,v=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},g=function(t){var e,r,n=[],i=1;if("string"==typeof t)if(d[t])n=d[t].slice(),r="rgb";else if("transparent"===t)i=0,r="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var o=t.slice(1);i=1,(a=o.length)<=4?(n=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],4===a&&(i=parseInt(o[3]+o[3],16)/255)):(n=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],8===a&&(i=parseInt(o[6]+o[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var s=e[1];r=o=s.replace(/a$/,"");var a="cmyk"===o?4:"gray"===o?1:3;n=e[2].trim().split(/\s*,\s*/).map(function(t,e){if(/%$/.test(t))return e===a?parseFloat(t)/100:"rgb"===o?255*parseFloat(t)/100:parseFloat(t);if("h"===o[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==m[t])return m[t]}return parseFloat(t)}),s===o&&n.push(1),i=void 0===n[a]?1:n[a],n=n.slice(0,a)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),r=t.match(/([a-z])/gi).join("").toLowerCase());else if("number"==typeof t)r="rgb",n=[t>>>16,(65280&t)>>>8,255&t];else if(function(t){var e;return"[object Object]"===y.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}(t)){var u=v(t.r,t.red,t.R,null);null!==u?(r="rgb",n=[u,v(t.g,t.green,t.G),v(t.b,t.blue,t.B)]):(r="hsl",n=[v(t.h,t.hue,t.H),v(t.s,t.saturation,t.S),v(t.l,t.lightness,t.L,t.b,t.brightness)]),i=v(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(i/=100)}else(Array.isArray(t)||p.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(n=[t[0],t[1],t[2]],r="rgb",i=4===t.length?t[3]:1);return{space:r,values:n,alpha:i}},m={red:0,orange:60,yellow:120,green:180,blue:240,purple:300},x=1e-6,w=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t},b=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},M=b,_=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},k=_,F=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},V=F,S=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},T=S,D=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},B=D,P=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},A=P,R=function(t){var e=t[0],r=t[1];return e*e+r*r},O=R,z=w(),E={EPSILON:x,create:w,clone:function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e},fromValues:function(t,e){var r=new Float32Array(2);return r[0]=t,r[1]=e,r},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},set:function(t,e,r){return t[0]=e,t[1]=r,t},equals:function(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return Math.abs(r-i)<=x*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=x*Math.max(1,Math.abs(n),Math.abs(o))},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]},add:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},subtract:b,sub:M,multiply:_,mul:k,divide:F,div:V,inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},min:function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},max:function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},rotate:function(t,e,r){var n=Math.cos(r),i=Math.sin(r),o=e[0],s=e[1];return t[0]=o*n-s*i,t[1]=o*i+s*n,t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},scaleAndAdd:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},distance:S,dist:T,squaredDistance:D,sqrDist:B,length:P,len:A,squaredLength:R,sqrLen:O,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},normalize:function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},cross:function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},lerp:function(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t},random:function(t,e){e=e||1;var r=2*Math.random()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},transformMat2:function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},transformMat2d:function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},transformMat3:function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},transformMat4:function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},forEach:function(t,e,r,n,i,o){var s,a;for(e||(e=2),r||(r=0),a=n?Math.min(n*e+r,t.length):t.length,s=r;s<a;s+=e)z[0]=t[s],z[1]=t[s+1],i(z,z,o),t[s]=z[0],t[s+1]=z[1];return t}},q=E.add,L=E.sub,j=E.scale,Z=E.dist,I=E.normalize,C=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,h=u>>1,l=-7,c=r?i-1:0,f=r?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=h}return(p?-1:1)*s*Math.pow(2,o-n)},X=function(t,e,r,n,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[r+p]=255&s,p+=d,s/=256,h-=8);t[r+p-d]|=128*y},W=U;function U(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function H(t){return t.type===U.Bytes?t.readVarint()+t.pos:t.pos+1}function N(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function G(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function Y(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function $(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function J(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function K(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function Q(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function tt(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function et(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function rt(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function nt(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function it(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ot(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function st(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}U.Varint=0,U.Fixed64=1,U.Bytes=2,U.Fixed32=5,U.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=it(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=st(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=it(this.buf,this.pos)+4294967296*it(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=it(this.buf,this.pos)+4294967296*st(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=C(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=C(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return N(t,n,e);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return N(t,n,e);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return N(t,n,e);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return N(t,n,e);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return N(t,n,e);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return N(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){for(var n="",i=e;i<r;){var o,s,a,u=t[i],h=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>r)break;1===l?u<128&&(h=u):2===l?128==(192&(o=t[i+1]))&&(h=(31&u)<<6|63&o)<=127&&(h=null):3===l?(o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&((h=(15&u)<<12|(63&o)<<6|63&s)<=2047||h>=55296&&h<=57343)&&(h=null)):4===l&&(o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((h=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,l=1):h>65535&&(h-=65536,n+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),n+=String.fromCharCode(h),i+=l}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=H(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=H(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=H(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=H(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=H(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=H(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=H(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=H(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=H(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===U.Varint)for(;this.buf[this.pos++]>127;);else if(e===U.Bytes)this.pos=this.readVarint()+this.pos;else if(e===U.Fixed32)this.pos+=4;else{if(e!==U.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ot(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ot(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ot(this.buf,-1&t,this.pos),ot(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ot(this.buf,-1&t,this.pos),ot(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&G(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),X(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),X(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&G(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,U.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,Y,e)},writePackedSVarint:function(t,e){this.writeMessage(t,$,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Q,e)},writePackedFloat:function(t,e){this.writeMessage(t,J,e)},writePackedDouble:function(t,e){this.writeMessage(t,K,e)},writePackedFixed32:function(t,e){this.writeMessage(t,tt,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,et,e)},writePackedFixed64:function(t,e){this.writeMessage(t,rt,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,nt,e)},writeBytesField:function(t,e){this.writeTag(t,U.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,U.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,U.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,U.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,U.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,U.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,U.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,U.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,U.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,U.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var at,ut="undefined"!=typeof e?e:void 0!==p?p:"undefined"!=typeof i?i:{},ht=function(t){var r=lt.call(t);return"[object Function]"===r||"function"==typeof t&&"[object RegExp]"!==r||"undefined"!=typeof e&&(t===e.setTimeout||t===e.alert||t===e.confirm||t===e.prompt)},lt=Object.prototype.toString,ct=(function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}}(at={exports:{}},at.exports),at.exports),ft=(ct.left,ct.right,function(t,e,r){if(!ht(e))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===pt.call(t)?function(t,e,r){for(var n=0,i=t.length;n<i;n++)dt.call(t,n)&&e.call(r,t[n],n,t)}(t,e,r):"string"==typeof t?function(t,e,r){for(var n=0,i=t.length;n<i;n++)e.call(r,t.charAt(n),n,t)}(t,e,r):function(t,e,r){for(var n in t)dt.call(t,n)&&e.call(r,t[n],n,t)}(t,e,r)}),pt=Object.prototype.toString,dt=Object.prototype.hasOwnProperty,yt=function(t){if(!t)return{};var e={};return ft(ct(t).split("\n"),function(t){var r,n=t.indexOf(":"),i=ct(t.slice(0,n)).toLowerCase(),o=ct(t.slice(n+1));void 0===e[i]?e[i]=o:(r=e[i],"[object Array]"===Object.prototype.toString.call(r)?e[i].push(o):e[i]=[e[i],o])}),e},vt=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)gt.call(r,n)&&(t[n]=r[n])}return t},gt=Object.prototype.hasOwnProperty,mt=wt;function xt(t,e,r){var n=t;return ht(e)?(r=e,"string"==typeof t&&(n={uri:t})):n=vt(e,{uri:t}),n.callback=r,n}function wt(t,e,r){return bt(e=xt(t,e,r))}function bt(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,r=function(r,n,i){e||(e=!0,t.callback(r,n,i))};function n(t){return clearTimeout(u),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,r(t,y)}function i(){if(!s){var e;clearTimeout(u),e=t.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var n=y,i=null;return 0!==e?(n={body:function(){var t=void 0;if(t=a.response?a.response:a.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(a),d)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:e,method:l,headers:{},url:h,rawRequest:a},a.getAllResponseHeaders&&(n.headers=yt(a.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),r(i,n,n.body)}}var o,s,a=t.xhr||null;a||(a=t.cors||t.useXDR?new wt.XDomainRequest:new wt.XMLHttpRequest);var u,h=a.url=t.uri||t.url,l=a.method=t.method||"GET",c=t.body||t.data,f=a.headers=t.headers||{},p=!!t.sync,d=!1,y={body:void 0,headers:{},statusCode:0,method:l,url:h,rawRequest:a};if("json"in t&&!1!==t.json&&(d=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==l&&"HEAD"!==l&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),c=JSON.stringify(!0===t.json?c:t.json))),a.onreadystatechange=function(){4===a.readyState&&setTimeout(i,0)},a.onload=i,a.onerror=n,a.onprogress=function(){},a.onabort=function(){s=!0},a.ontimeout=n,a.open(l,h,!p,t.username,t.password),p||(a.withCredentials=!!t.withCredentials),!p&&t.timeout>0&&(u=setTimeout(function(){if(!s){s=!0,a.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",n(t)}},t.timeout)),a.setRequestHeader)for(o in f)f.hasOwnProperty(o)&&a.setRequestHeader(o,f[o]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(a.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(a),a.send(c||null),a}function Mt(t,e){const r=t.feature.loadGeometry();let n;for(const i of r){n=[];for(const t of i)n.push([t.x-2048,t.y-2048]);kt(n,t,e)}return t}function _t(t,e,r,n){const i=L([],e,t),o=I([],[-i[1],i[0]]),s=j([],o,n.width_tmp);let a=q([],e,s),u=L([],e,s),h=q([],t,s),l=L([],t,s);a=[a[0],r.layerOrder,a[1]],u=[u[0],r.layerOrder,u[1]],h=[h[0],r.layerOrder,h[1]],l=[l[0],r.layerOrder,l[1]],r.vecData.push(...h,...l,...a),r.vecData.push(...a,...l,...u);for(let t=0;t<6;t++)r.colData.push(n.color_tmp[0]/255,n.color_tmp[1]/255,n.color_tmp[2]/255);return{back:{left:l,right:h},front:{left:u,right:a}}}function kt(t,e,r){if(t.length<2)return;let n,i;for(let o=0;o<t.length-1;o++){if(n=i||_t(t[o],t[o+1],e,r),0===o){const r=t[o].join("|");if(e.cups[r])delete e.cups[r].normal,e.cups[r].push(n.back);else{const i=L([],t[o+1],t[o]),s=I([],i),a=n.back;a.normal=s,e.cups[r]=[a]}}if(o===t.length-2){const r=t[o+1].join("|");if(e.cups[r])delete e.cups[r].normal,e.cups[r].push(n.front);else{const i=L([],t[o],t[o+1]),s=I([],i),a=n.front;a.normal=s,e.cups[r]=[a]}}if(t[o+2]){i=_t(t[o+1],t[o+2],e,r),e.vecData.push(...n.front.right,...n.front.left,...i.back.right),e.vecData.push(...n.front.right,...n.front.left,...i.back.left);for(let t=0;t<6;t++)e.colData.push(r.color_tmp[0]/255,r.color_tmp[1]/255,r.color_tmp[2]/255)}}return e}wt.XMLHttpRequest=ut.XMLHttpRequest||function(){},wt.XDomainRequest="withCredentials"in new wt.XMLHttpRequest?wt.XMLHttpRequest:ut.XDomainRequest,function(t,e){for(var r=0;r<t.length;r++)e(t[r])}(["get","put","post","patch","head","delete"],function(t){wt["delete"===t?"del":t]=function(e,r,n){return(r=xt(e,r,n)).method=t.toUpperCase(),bt(r)}});var Ft,Vt=Tt,St=Tt;function Tt(t,e,r){r=r||2;var n,i,o,s,a,u,h,l=e&&e.length,c=l?e[0]*r:t.length,f=Dt(t,0,c,r,!0),p=[];if(!f)return p;if(l&&(f=function(t,e,r,n){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=Dt(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),a.push(jt(s));for(a.sort(Et),i=0;i<a.length;i++)qt(a[i],r),r=Bt(r,r.next);return r}(t,e,f,r)),t.length>80*r){n=o=t[0],i=s=t[1];for(var d=r;d<c;d+=r)a=t[d],u=t[d+1],a<n&&(n=a),u<i&&(i=u),a>o&&(o=a),u>s&&(s=u);h=0!==(h=Math.max(o-n,s-i))?1/h:0}return Pt(f,p,r,n,i,h),p}function Dt(t,e,r,n,i){var o,s;if(i===$t(t,e,r,n)>0)for(o=e;o<r;o+=n)s=Nt(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=Nt(o,t[o],t[o+1],s);return s&&Xt(s,s.next)&&(Gt(s),s=s.next),s}function Bt(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Xt(n,n.next)&&0!==Ct(n.prev,n,n.next))n=n.next;else{if(Gt(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function Pt(t,e,r,n,i,o,s){if(t){!s&&o&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=Lt(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,u,h=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<h&&(a++,n=n.nextZ);e++);for(u=h;a>0||u>0&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,h*=2}while(s>1)}(i)}(t,n,i,o);for(var a,u,h=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?Rt(t,n,i,o):At(t))e.push(a.i/r),e.push(t.i/r),e.push(u.i/r),Gt(t),t=u.next,h=u.next;else if((t=u)===h){s?1===s?Pt(t=Ot(t,e,r),e,r,n,i,o,2):2===s&&zt(t,e,r,n,i,o):Pt(Bt(t),e,r,n,i,o,1);break}}}function At(t){var e=t.prev,r=t,n=t.next;if(Ct(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Zt(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Ct(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Rt(t,e,r,n){var i=t.prev,o=t,s=t.next;if(Ct(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,h=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=Lt(a,u,e,r,n),f=Lt(h,l,e,r,n),p=t.prevZ,d=t.nextZ;p&&p.z>=c&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&Zt(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Ct(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&Zt(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Ct(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&Zt(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Ct(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Zt(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Ct(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Ot(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!Xt(i,o)&&Wt(i,n,n.next,o)&&Ut(i,o)&&Ut(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),Gt(n),Gt(n.next),n=t=o),n=n.next}while(n!==t);return n}function zt(t,e,r,n,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&It(s,a)){var u=Ht(s,a);return s=Bt(s,s.next),u=Bt(u,u.next),Pt(s,e,r,n,i,o),void Pt(u,e,r,n,i,o)}a=a.next}s=s.next}while(s!==t)}function Et(t,e){return t.x-e.x}function qt(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var u,h=r,l=r.x,c=r.y,f=1/0;for(n=r.next;n!==h;)i>=n.x&&n.x>=l&&i!==n.x&&Zt(o<c?i:s,o,l,c,o<c?s:i,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(i-n.x))<f||u===f&&n.x>r.x)&&Ut(n,t)&&(r=n,f=u),n=n.next;return r}(t,e)){var r=Ht(e,t);Bt(r,r.next)}}function Lt(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function jt(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function Zt(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function It(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Wt(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&Ut(t,e)&&Ut(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function Ct(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Xt(t,e){return t.x===e.x&&t.y===e.y}function Wt(t,e,r,n){return!!(Xt(t,e)&&Xt(r,n)||Xt(t,n)&&Xt(r,e))||Ct(t,e,r)>0!=Ct(t,e,n)>0&&Ct(r,n,t)>0!=Ct(r,n,e)>0}function Ut(t,e){return Ct(t.prev,t,t.next)<0?Ct(t,e,t.next)>=0&&Ct(t,t.prev,e)>=0:Ct(t,e,t.prev)<0||Ct(t,t.next,e)<0}function Ht(t,e){var r=new Yt(t.i,t.x,t.y),n=new Yt(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Nt(t,e,r,n){var i=new Yt(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Gt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Yt(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $t(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Jt(t,e){const r=function(t){const e=t.length;if(e<=1)return[t];const r=[];let n,i;for(let o=0;o<e;o++){const e=te(t[o]);0!==e&&(void 0===i&&(i=e<0),i===e<0?(n&&r.push(n),n=[t[o]]):n&&n.push(t[o]))}return n&&r.push(n),r}(t.feature.loadGeometry());let n;for(const i of r){n=[[],[]];for(let t=0;t<i.length;t++)for(let e=0;e<i[t].length-1;e++)n[0].push(i[t][e].x-2048,i[t][e].y-2048),t>0&&n[1].push((n[0].length-2)/2);0===e.height?Kt(n,t,e):Qt(n,t,e)}return t}function Kt(t,e,r){const n=Vt(t[0],t[1]);for(const i of n)e.vecData.push(t[0][2*i],r.min_height_tmp+e.layerOrder,t[0][2*i+1]),e.colData.push(r.color_tmp[0]/255,r.color_tmp[1]/255,r.color_tmp[2]/255);return e}function Qt(t,e,r){const n=Vt(t[0],t[1]);for(const i of n)e.vecData.push(t[0][2*i],r.min_height_tmp+e.layerOrder,t[0][2*i+1]),e.colData.push(r.color_tmp[0]/255,r.color_tmp[1]/255,r.color_tmp[2]/255);for(const i of n)e.vecData.push(t[0][2*i],r.height_tmp,t[0][2*i+1]),e.colData.push(r.color_tmp[0]/255,r.color_tmp[1]/255,r.color_tmp[2]/255);for(let n=0;n<t[0].length/2;n++)if(n+1!==t[0].length/2){e.vecData.push(t[0][2*n],r.height_tmp,t[0][2*n+1]),e.vecData.push(t[0][2*n],r.min_height_tmp+e.layerOrder,t[0][2*n+1]),e.vecData.push(t[0][2*(n+1)],r.min_height_tmp+e.layerOrder,t[0][2*(n+1)+1]),e.vecData.push(t[0][2*(n+1)],r.min_height_tmp+e.layerOrder,t[0][2*(n+1)+1]),e.vecData.push(t[0][2*(n+1)],r.height_tmp,t[0][2*(n+1)+1]),e.vecData.push(t[0][2*n],r.height_tmp,t[0][2*n+1]);for(let t=0;t<6;t++)e.colData.push(r.color_tmp[0]/255,r.color_tmp[1]/255,r.color_tmp[2]/255)}else{e.vecData.push(t[0][2*n],r.height_tmp,t[0][2*n+1]),e.vecData.push(t[0][2*n],r.min_height_tmp+e.layerOrder,t[0][2*n+1]),e.vecData.push(t[0][0],r.min_height_tmp+e.layerOrder,t[0][1]),e.vecData.push(t[0][0],r.min_height_tmp+e.layerOrder,t[0][1]),e.vecData.push(t[0][0],r.height_tmp,t[0][1]),e.vecData.push(t[0][2*n],r.height_tmp,t[0][2*n+1]);for(let t=0;t<6;t++)e.colData.push(r.color_tmp[0]/255,r.color_tmp[1]/255,r.color_tmp[2]/255)}return e}function te(t){let e=0;const r=t.length;let n,i,o=r-1;for(let s=0;s<r;o=s++)n=t[s],e+=((i=t[o]).x-n.x)*(n.y+i.y);return e}Tt.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs($t(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var h=e[a]*r,l=a<u-1?e[a+1]*r:t.length;s-=Math.abs($t(t,h,l,r))}var c=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,p=n[a+1]*r,d=n[a+2]*r;c+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},Tt.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},Vt.default=St,function(t){t[t.Linestring=2]="Linestring",t[t.Polygon=3]="Polygon"}(Ft||(Ft={}));const ee=/function/g;function re(t,e){return Function(`return (${t}(${JSON.stringify(e)}))`)()}const ne=[100,100,100,80,60,50,30,25,20,20,10,5,2,1,.5,.1,.1];function ie(t,e){for(const r in e.cups)if(e.cups.hasOwnProperty(r)){if(e.cups[r].length>=2){e.vecData.push(...e.cups[r][0].right,...e.cups[r][0].left,...e.cups[r][1].right,...e.cups[r][1].right,...e.cups[r][0].left,...e.cups[r][1].left);for(let r=0;r<6;r++)e.colData.push(t.color_tmp[0]/255,t.color_tmp[1]/255,t.color_tmp[2]/255)}if(e.cups[r][0].normal){const n=9,i=3,o=e.cups[r][0].right,s=e.cups[r][0].left,a=[e.cups[r][0].right[0],e.cups[r][0].right[2]],u=[e.cups[r][0].left[0],e.cups[r][0].left[2]];let h=L([],a,u);const l=Math.round(Z(a,u));h=[u[0]+h[0]/2,u[1]+h[1]/2];const c=e.cups[r][0].normal,f=I([],L([],a,u)),p=[h[0]-l/2*c[0],e.layerOrder,h[1]-l/2*c[1]],d=[h[0]+l/i*(f[0]-c[0]),e.layerOrder,h[1]+l/i*(f[1]-c[1])],y=[h[0]-l/i*(c[0]+f[0]),e.layerOrder,h[1]-l/i*(c[1]+f[1])];e.vecData.push(...o,...p,...d),e.vecData.push(...o,...s,...p),e.vecData.push(...s,...y,...p);for(let r=0;r<n;r++)e.colData.push(t.color_tmp[0]/255,t.color_tmp[1]/255,t.color_tmp[2]/255)}}}i.addEventListener("message",t=>{mt({method:"GET",responseType:"arraybuffer",url:t.data.url,useXDR:!0},(e,r,n)=>{const o=new f(new W(n)),s={colData:[],cups:[],feature:void 0,inxData:[],layerOrder:0,tile:function(t){for(var e=0,r=0,n=t.length,i=n;i>0;i--){var o=1<<i-1,s=+t[n-i];1===s&&(e|=o),2===s&&(r|=o),3===s&&(e|=o,r|=o)}return[e,r,n]}(t.data.id),vecData:[]};let a,u,h;for(const e of t.data.style.layers)if(o.layers[e.name]){s.layerOrder+=ne[s.tile[2]],a=e;for(let t=0;t<o.layers[e.name].length;t++)u=o.layers[e.name].feature(t),h=!1,s.feature=u,"string"==typeof a.color&&a.color.match(ee)?a.color_tmp=g(re(a.color,u.properties)):a.color_tmp=g(a.color).values,"boolean"==typeof a.show?a.show_tmp=a.show:"string"==typeof a.show&&(a.show_tmp=re(a.show,u.properties)),a.show_tmp&&(h=!0,u.type===Ft.Linestring?(a.type,"string"==typeof a.width?a.width_tmp=re(a.width,u.properties)/2:"number"==typeof a.width&&(a.width_tmp=a.width),Mt(s,a),a.cups&&ie(a,s)):u.type===Ft.Polygon&&(a.type,"string"==typeof a.height?a.height_tmp=re(a.height,u.properties):"number"==typeof a.height&&(a.height_tmp=a.height),"string"==typeof a.min_height?a.min_height_tmp=re(a.min_height,u.properties):"number"==typeof a.min_height&&(a.min_height_tmp=a.min_height),Jt(s,a))),i.postMessage({type:"feature",realData:{feature:u,shown:h}})}const l=function(t,e){var r=t.length;e||(e=new Float32Array(r));for(var n=0;n<r;n+=9){var i=t[n+3]-t[n],o=t[n+4]-t[n+1],s=t[n+5]-t[n+2],a=t[n+6]-t[n],u=t[n+7]-t[n+1],h=t[n+8]-t[n+2],l=o*h-s*u,c=s*a-i*h,f=i*u-o*a,p=Math.sqrt(l*l+c*c+f*f);0===p?(e[n]=0,e[n+1]=0,e[n+2]=0,e[n+3]=0,e[n+4]=0,e[n+5]=0,e[n+6]=0,e[n+7]=0,e[n+8]=0):(l/=p,c/=p,f/=p,e[n]=l,e[n+1]=c,e[n+2]=f,e[n+3]=l,e[n+4]=c,e[n+5]=f,e[n+6]=l,e[n+7]=c,e[n+8]=f)}return e}(s.vecData,0).buffer,c=new Float32Array(s.vecData).buffer,p=new Float32Array(s.colData).buffer;i.postMessage({type:"onFinish",realData:{vertexBuffer:c,colorBuffer:p,normalBuffer:l,id:t.data.id}},[c,p,l])})})},"object"==typeof t&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()});class B{constructor(t,e){this.availableWorkers=[],this.taskList=[],this.callback=e;for(let e=0;e<t;e++)this.availableWorkers[e]=new D,this.availableWorkers[e].onmessage=(t=>{"onFinish"===t.data.type?(this.availableWorkers.push(t.target),this.callback(t.data),this.checkoutTasks()):(this.availableWorkers.push(t.target),r.events.emit(t.data.type,t.data.realData))})}checkoutTasks(){if(this.availableWorkers.length>0&&this.taskList.length>0){const t=this.availableWorkers.pop(),e=this.taskList.pop();t.postMessage(e)}}startWorker(t){this.taskList.push(t),this.checkoutTasks()}}let P;function A(){var t;P=new B(r.style.workers,n=>{t=n.realData.id,r.grid.tiles.containsTile(t)&&function(t){const n=m(t.id),i=x(t.id),o=new e.BufferGeometry;o.addAttribute("position",new e.BufferAttribute(new Float32Array(t.vertexBuffer),3)),o.addAttribute("color",new e.BufferAttribute(new Float32Array(t.colorBuffer),3)),o.addAttribute("normal",new e.BufferAttribute(new Float32Array(t.normalBuffer),3));const s=new e.Mesh(o,r.material);s.name=t.id,r.three_map.add(s),s.scale.set(i,1,i),s.position.set(n[0],0,-n[1]),r.events.emit("tileCreated",{tile:s})}(n.realData)})}class R{constructor(t,n){var i;this.id=n||u(t),[this.x,this.y,this.z]=t,this.url=(i={x:this.x,y:this.y,z:this.z},y.lastIndex=0,r.style.address.replace(y,(t,e)=>i[e])),this.bounds=function(t){const r=m(t),n=x(t)*f*.94,i=new e.Vector3(r[0]+n,0,-r[1]+n),o=new e.Vector3(r[0]-n,0,-r[1]-n);return new e.Box3(i,o)}(this.id)}build(){return t={url:this.url,id:this.id,style:r.style},P.startWorker(t);var t}getBounds(){return this.bounds}remove(){!function(t){const n=r.three_map.getObjectByName(t);n&&n instanceof e.Mesh&&(n.geometry&&n.geometry.dispose(),r.three_map.remove(n)),r.events.emit("tileRemoved",{tileID:t})}(this.id)}}class O extends Array{containsTile(t){for(let e=0;e<this.length;e++)if(this[e].id===t)return!0;return!1}getTilesToRender(t){const e=[];if(!t){for(let t=0;t<this.length;t++)e.push(this[t]);return{toRender:e,toRemove:void 0}}const r=[],n=new O;for(let r=0;r<this.length;r++)t.containsTile(this[r].id)?n.push(this[r]):e.push(this[r]);for(let e=0;e<t.length;e++)n.containsTile(t[e].id)||r.push(t[e]);return{toRender:e,toRemove:r}}}class z{static render(t){if(t.toRender)for(let e=0;e<t.toRender.length;e++)t.toRender[e].build();if(t.toRemove)for(let e=0;e<t.toRemove.length;e++)t.toRemove[e].remove()}getTilesForView(){const t=new O;let e,n;var i;this.position=[r.controls.target.x,-r.controls.target.z],this.zoom=(i=r.controls.target.distanceTo(r.camera.position),Math.round(Math.min(Math.max(Math.log(i/15e6)/Math.log(.5),r.style.minZoom),r.style.maxZoom)));const o=function(t,e){const r=d.inverse(t);return l(r[0],r[1],e)}(this.position,this.zoom);for(let i=-r.style.tilesExtend;i<=r.style.tilesExtend;i++)for(let a=-r.style.tilesExtend;a<=r.style.tilesExtend;a++)g(e=[o[0]+i,o[1]+a,o[2]])&&(n=new R(e),s=n.bounds,r.frustum.intersectsBox(s)&&t.push(n));var s;return t}update(){let t;if(this.tiles){const e=this.tiles;this.tiles=this.getTilesForView(),t=this.tiles.getTilesToRender(e)}else this.tiles=this.getTilesForView(),t=this.tiles.getTilesToRender();z.render(t)}}t.Map=class extends e.Object3D{static lonLatToMerc(t){return function(t){let e=d.forward(t);return[e[0],-e[1]]}(t)}static mercToLonLat(t){return e=t,d.inverse([e[0],-e[1]]);var e}constructor(t){if(super(),!t.camera||!t.controls||!t.style)throw new Error("Please provide parameters with ThreeJS camera, controls and ThreeMap style!");this.events=new function(t){return t=t||Object.create(null),{on:function(e,r){(t[e]||(t[e]=[])).push(r)},off:function(e,r){t[e]&&t[e].splice(t[e].indexOf(r)>>>0,1)},emit:function(e,r){(t[e]||[]).slice().map(function(t){t(r)}),(t["*"]||[]).slice().map(function(t){t(e,r)})}}},r.style=function(t){if(!t.address||!t.layers||!t.material)return v("Required style properties (address, layers, material) haven't been supplied");for(const e of t.layers){if(!e.name||!e.color)return v("Required style properties (name, color) haven't been supplied");e.width&&"function"===typeof e.width&&(e.width=e.width.toString()),e.height&&"function"===typeof e.height&&(e.height=e.height.toString()),e.min_height&&"function"===typeof e.min_height&&(e.min_height=e.min_height.toString()),e.color&&"function"===typeof e.color&&(e.color=e.color.toString()),e.height=e.height?e.height:0,e.min_height=e.min_height?e.min_height:0,e.width=e.width?e.width:2,e.show=!e.show||e.show,e.cups=!e.cups||e.cups,e.type=e.type?e.type:"ALL"}return t.maxZoom=t.maxZoom?t.maxZoom:16,t.minZoom=t.minZoom?t.minZoom:1,t.tilesExtend=t.tilesExtend?t.tilesExtend:2,t.workers=t.workers?t.workers:4,t}(t.style),r.camera=t.camera,r.frustum=new e.Frustum,r.frustum.setFromMatrix((new e.Matrix4).multiplyMatrices(r.camera.projectionMatrix,r.camera.matrixWorldInverse)),r.controls=t.controls,r.grid=new z,r.events=this.events,r.three_map=this,r.material=t.style.material,A(),t.style.material=void 0,r.controls.addEventListener("change",()=>{r.camera.updateMatrix(),r.camera.updateMatrixWorld(!1),r.camera.matrixWorldInverse.getInverse(r.camera.matrixWorld),r.frustum.setFromMatrix((new e.Matrix4).multiplyMatrices(r.camera.projectionMatrix,r.camera.matrixWorldInverse)),r.grid.update()})}off(t,e){this.events.off(t,e)}on(t,e){this.events.on(t,e)}registerExtension(t){this.events.on("update",t.onUpdate.bind(t)),this.events.on("tileCreated",t.onTileRemoved.bind(t)),this.events.on("tileRemoved",t.onTileCreated.bind(t)),this.events.on("feature",t.onFeature.bind(t)),t.style=r.style,t.map=r.three_map}},t.Extension=class{constructor(t){this.onFeature=t.onFeature,this.onTileCreated=t.onTileCreated,this.onTileRemoved=t.onTileRemoved,this.onUpdate=t.onUpdate}},Object.defineProperty(t,"__esModule",{value:!0})});
